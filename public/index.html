<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Home</title>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="/css/style.css">

  <style>@view-transition { navigation: auto; }</style>
  

  
 </head>
 <body>
  <div class="page-wrapper"><!-- Scroll to Top Button -->
   <div class="scroll-to-top" id="scrollToTop">
    <svg width="24" height="24" viewbox="0 0 24 24" fill="none"><path d="M12 19V5M5 12L12 5L19 12" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" />
    </svg>
   </div>

  <img src="/images/background/1.jpg" alt="Background" class="bg-image" />



   <!-- Navigation -->
    <nav class="nav-container bg-white shadow">
  <div class="max-w-7xl mx-auto px-6 py-4">
    <div class="flex items-center justify-between">

      <!-- Logo + Group Name -->
      <div class="flex items-center space-x-3">
        <div class="w-20 h-20 bg-white rounded-lg flex items-center justify-center overflow-hidden">
          <img src="/images/logo/l9.jpg"
               alt="Group Logo"
               class="w-full h-full object-contain scale-150" />
        </div>
        <span id="nav-group-name" class="text-xl font-bold text-gray-800">
          Smart Polymeric Biomaterials
        </span>
      </div>

      <!-- Desktop Menu -->
      <div id="desktop-menu" class="hidden md:flex space-x-6 items-center">

        <a href="index.html" class="nav-link text-purple-600">Home</a>

        <!-- Research -->
        <div class="dropdown dropdown-down">
          <a class="nav-link text-gray-700 hover:text-purple-600 ">
            Research ▾
          </a>

          <div class="dropdown-menu">

            <!-- Overview -->
            <div class="dropdown dropdown-right">
              <a href="/NavBar-Pages/overview.html" class="dropdown-item nav-link text-gray-700 hover:text-purple-600">
                Overview ▸
              </a>

              <div class="dropdown-menu">
               <div id="research-dropdown"></div>
              </div>
            </div>

            <a href="NavBar-Pages/lab.html"
               class="dropdown-item nav-link text-gray-700 hover:text-purple-600">
              Lab
            </a>

            <a href="NavBar-Pages/funding.html"
               class="dropdown-item nav-link text-gray-700 hover:text-purple-600">
              Funding
            </a>

          </div>
        </div>

        <!-- People -->
        <div class="dropdown dropdown-down">
          <a class="nav-link text-gray-700 hover:text-purple-600 ">
            People ▾
          </a>

          <div class="dropdown-menu ">
            <a href="NavBar-Pages/team.html"
               class="dropdown-item nav-link text-gray-700 hover:text-purple-600">
              Team
            </a>

            <a href="NavBar-Pages/collabrations.html"
               class="dropdown-item nav-link text-gray-700 hover:text-purple-600">
              Collaborations
            </a>
          </div>
        </div>

        <a href="publication.html" class="nav-link text-gray-700 hover:text-purple-600">
          Publications
        </a>

        <a href="NavBar-Pages/events.html" class="nav-link text-gray-700 hover:text-purple-600">
          Events
        </a>

        <a href="NavBar-Pages/joinUs.html" class="nav-link text-gray-700 hover:text-purple-600">
          Join Us
        </a>

        

      </div>

      <!-- Mobile Hamburger -->
      <button id="menu-btn" class="md:hidden text-gray-800 focus:outline-none">
        <svg class="w-8 h-8" fill="none" stroke="currentColor" stroke-width="2"
             viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round"
                d="M4 6h16M4 12h16M4 18h16" />
        </svg>
      </button>

    </div>
  </div>

  <!-- Mobile Menu -->
  <div id="mobile-menu" class="md:hidden hidden px-6 pb-4 bg-white">

    <a href="index.html" class="block py-2 text-purple-600">Home</a>

    <!-- Mobile Research -->
    <button class="toggle-btn w-full text-left py-2 text-gray-700 hover:text-purple-600">
      Research ▾
    </button>
    <div class="hidden pl-4">
      <button data-href="NavBar-Pages/overview.html" class="toggle-btn w-full text-left py-2 text-gray-700 hover:text-purple-600" id="overview-btn">
    Overview ▸
  </button>
  <div class="hidden pl-4" id="overview-menu">
  <!-- Dynamic categories will load here -->
</div>

  <a href="NavBar-Pages/lab.html" class="block py-1">Lab</a>
  <a href="NavBar-Pages/funding.html" class="block py-1">Funding</a>
    </div>

    <!-- Mobile People -->
    <button class="toggle-btn w-full text-left py-2 text-gray-700 hover:text-purple-600">
      People ▾
    </button>
    <div class="hidden pl-4">
      <a href="NavBar-Pages/team.html" class="block py-1">Team</a>
      <a href="NavBar-Pages/collabrations.html" class="block py-1">Collaborations</a>
    </div>

    <a href="publication.html" class="block py-2">Publications</a>
    <a href="NavBar-Pages/events.html" class="block py-2">Events</a>
    <a href="NavBar-Pages/joinUs.html" class="block py-2">Join Us</a>
    
  </div>
</nav>




   <!-- Home Page -->
   <div id="home" class="content-section active">
    <div class="max-w-7xl mx-auto px-6 py-16">
      <h1  class="text-5xl text-center text-white mb-4">Smart Polymeric Biomaterials</h1>
      <p  class="text-2xl text-center text-purple-100">Pioneering Innovation in Science and Technology</p>

   <div class="slideshow-container relative"
     style="height: 500px; border-radius: 12px; overflow: hidden;">

  <!-- Slides injected here -->

  <a class="slide-prev">&#10094;</a>
  <a class="slide-next">&#10095;</a>

  <div class="indicators"></div>
</div>


     
     
  


     <br><br>

   <!-- Latest News Section -->
   <h1 class="text-4xl font-bold text-white mb-8">Latest News</h1>
 
  
   
      <p class="text-xl text-gray-200 mb-12">Stay informed about our groundbreaking discoveries</p>
<section id="mainNews" class="space-y-6 mb-8"></section>
<section id="moreNews" class="read-more-section space-y-6"></section>

<div class="flex justify-center mt-6">
  <button id="toggleButton"
    class=" bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-3 px-6 rounded-lg font-semibold hover:from-purple-700 hover:to-indigo-700 transition">
    Read More News
  </button>
</div>





    </div>
  
   </div>

<div id="footer"></div>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>


   
   
 <script src="/js/supabase.js"></script>
 <script>
  
  async function loadSliderFromDB() {
  const container = document.querySelector(".slideshow-container");
  const indicators = container.querySelector(".indicators");

  // Clear old slides
  container.querySelectorAll(".slide").forEach(s => s.remove());
  indicators.innerHTML = "";

  // Fetch slider data
  const { data, error } = await supabaseClient
    .from("home_slider")
    .select("file_name, img_url, media_type")
    .order("id", { ascending: true });

  if (error) {
    console.error("DB error:", error);
    return;
  }

  if (!data || data.length === 0) {
    console.warn("No slider media found");
    return;
  }

  data.forEach((row, index) => {
    const slide = document.createElement("div");
    slide.className = "slide fade";
    slide.style.opacity = index === 0 ? "1" : "0";

    // ======================
    // IMAGE SLIDE
    // ======================
    if (row.media_type === "image") {
      const img = document.createElement("img");
      img.src = row.img_url;
      img.alt = row.file_name ?? "";
      img.className = "slider-img fullscreen-enabled";
      slide.appendChild(img);
    }

    // ======================
    // VIDEO SLIDE
    // ======================
    if (row.media_type === "video") {
      const video = document.createElement("video");
      video.src = row.img_url;
      video.autoplay = true;      // ✅ autoplay
  video.muted = true;         // ✅ required for autoplay
  video.playsInline = true;   // ✅ mobile support
  video.loop = false;         // optional
  video.controls = false;      // optional (you can hide)
      video.className = "slider-video w-full h-full object-contain rounded-lg";

      // Pause slider autoplay when video plays
      video.addEventListener("play", () => {
        if (window.stopSliderAuto) window.stopSliderAuto();
      });

      video.addEventListener("ended", () => {
        if (window.startSliderAuto) window.startSliderAuto();
      });
      

      slide.appendChild(video);
    }

    container.insertBefore(slide, container.firstChild);

    // Indicator
    const indicator = document.createElement("span");
    indicator.className = "indicator";
    if (index === 0) indicator.classList.add("active");
    indicators.appendChild(indicator);
  });

 // console.log("Slides loaded:", data.length);

  // Hide arrows + indicators if only one slide
  if (data.length === 1) {
    container.querySelector(".slide-prev")?.classList.add("hidden");
    container.querySelector(".slide-next")?.classList.add("hidden");
    indicators.classList.add("hidden");
  }

  // Start slider
  initSlider(container);
}
//News Section Toggle and Rendering 
/************************
 * FETCH NEWS FROM SUPABASE
 ************************/
document.addEventListener("DOMContentLoaded", loadSliderFromDB);

  async function fetchNews() {
  const { data, error } = await supabaseClient
    .from("news")
    .select("*")
    .order("date", { ascending: false });

  if (error) {
    console.error("Error fetching news:", error);
    return [];
  }

  return data;
}

/************************  
 * UI HELPERS
 ************************/
function createNewsCard(news) {
  const card = document.createElement("article");
  card.className = "news-card bg-white rounded-xl p-12 shadow-2xl";

  card.innerHTML = `
    <div class="flex justify-between mb-3">
      <span class="px-8 py-3 text-xl bg-emerald-300/20 text-emerald-400 rounded-full">
        ${news.category}
      </span>
      <time class="text-purple-600 font-medium mb-3">
        ${new Date(news.date).toDateString()}
      </time>
    </div>
    <h2 class="text-4xl font-bold text-gray-800 mb-8">${news.title}</h2>
    <p class="text-gray-600">${news.summary}</p>
    <p class="text-purple-600 font-medium mb-3">${news.author}</p>
  `;

  return card;
}

/************************
 * RENDER LOGIC
 ************************/
let isExpanded = false;
let newsData = [];

async function renderNews() {
  const mainNews = document.getElementById("mainNews");
  const moreNews = document.getElementById("moreNews");
  const toggleButton = document.getElementById("toggleButton");

  mainNews.innerHTML = "";
  moreNews.innerHTML = "";

  newsData = await fetchNews();

  // First 3 news
  newsData.slice(0, 3).forEach(news => {
    mainNews.appendChild(createNewsCard(news));
  });

  // Remaining news
  newsData.slice(3).forEach(news => {
    moreNews.appendChild(createNewsCard(news));
  });

  // ⭐ Show/hide toggle button
  if (newsData.length <= 3) {
    toggleButton.style.display = "none";
  } else {
    toggleButton.style.display = "block";
  }
}

/************************
 * TOGGLE BUTTON
 ************************/

document.getElementById("toggleButton").addEventListener("click", () => {
  const moreNews = document.getElementById("moreNews");

  isExpanded = !isExpanded;
  moreNews.classList.toggle("expanded", isExpanded);

  document.getElementById("toggleButton").textContent =
    isExpanded ? "Show Less" : "Read More News";
});

/************************
 * INIT
 ************************/
document.addEventListener("DOMContentLoaded", renderNews);


async function loadNavbarCategories() {
  const { data } = await supabaseClient
    .from("research_categories")
    .select("title, slug")
    .eq("active", true)
    .order("sort_order", { ascending: true });

  const container = document.getElementById("research-dropdown");

  data.forEach(cat => {
    container.insertAdjacentHTML("beforeend", `
      <a href="NavBar-Pages/research-category.html?slug=${cat.slug}"
         class="dropdown-item">
        ${cat.title}
      </a>
    `);
  });
}

document.addEventListener("DOMContentLoaded", loadNavbarCategories);


async function loadMobileOverviewCategories() {

  const { data, error } = await supabaseClient
    .from("research_categories")
    .select("title, slug")
    .eq("active", true)
    .order("sort_order", { ascending: true });

  if (error) {
    console.error("Mobile overview fetch error:", error);
    return;
  }

  const overviewMenu = document.getElementById("overview-menu");
  overviewMenu.innerHTML = "";

  data.forEach(category => {
    overviewMenu.insertAdjacentHTML("beforeend", `
      <a href="NavBar-Pages/research-category.html?slug=${category.slug}"
         class="block py-1 text-gray-700 hover:text-purple-600">
        ${category.title}
      </a>
    `);
  });
}
document.addEventListener("DOMContentLoaded", () => {
  loadMobileOverviewCategories();
});
  





  </script>

<script src="js/script.js"></script>   


</body>
</html>
